{"ast":null,"code":"import { ReactionRequestVm, ReactionType } from '../../../../model/reaction-request-vm';\nimport { DialogCommentsComponent } from '../dialog-comments/dialog-comments.component';\nimport { PostRequest } from '../../../../model/post-request';\nimport { SnackbarPanelClass } from '../../../../enum/snackbar-panel-class.enum';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { LeftBarComponent } from '../left-bar/left-bar.component';\nimport { RightBarComponent } from '../right-bar/right-bar.component';\nimport { PublishComponent } from '../publish/publish.component';\nimport { InfiniteScrollModule } from 'ngx-infinite-scroll';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../service/post/post.service\";\nimport * as i2 from \"../../../../service/reaction/reaction.service\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"@angular/material/snack-bar\";\nimport * as i5 from \"../../../../service/auth/auth.service\";\nimport * as i6 from \"../../../../service/shared.service\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/forms\";\nimport * as i9 from \"ngx-infinite-scroll\";\nfunction MainPageComponent_div_7_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function MainPageComponent_div_7_div_10_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const dropdown_r3 = i0.ɵɵreference(4);\n      return i0.ɵɵresetView(dropdown_r3.hidden = !dropdown_r3.hidden);\n    });\n    i0.ɵɵelement(2, \"i\", 27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 28, 0)(5, \"div\", 29)(6, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function MainPageComponent_div_7_div_10_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const dropdown_r3 = i0.ɵɵreference(4);\n      const post_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      ctx_r4.onEditPost(post_r4);\n      return i0.ɵɵresetView(dropdown_r3.hidden = true);\n    });\n    i0.ɵɵelement(7, \"i\", 31);\n    i0.ɵɵelementStart(8, \"span\");\n    i0.ɵɵtext(9, \"Edit Post\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(10, \"div\", 32);\n    i0.ɵɵelementStart(11, \"button\", 33);\n    i0.ɵɵlistener(\"click\", function MainPageComponent_div_7_div_10_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const dropdown_r3 = i0.ɵɵreference(4);\n      const post_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      ctx_r4.onDeletePost(post_r4);\n      return i0.ɵɵresetView(dropdown_r3.hidden = true);\n    });\n    i0.ɵɵelement(12, \"i\", 34);\n    i0.ɵɵelementStart(13, \"span\");\n    i0.ɵɵtext(14, \"Delete Post\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleProp(\"top\", ctx_r4.dropdownTop, \"px\")(\"right\", ctx_r4.dropdownRight, \"px\");\n  }\n}\nfunction MainPageComponent_div_7_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35)(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const post_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(post_r4.content);\n  }\n}\nfunction MainPageComponent_div_7_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 35)(1, \"textarea\", 36);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function MainPageComponent_div_7_div_12_Template_textarea_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const post_r4 = i0.ɵɵnextContext().$implicit;\n      i0.ɵɵtwoWayBindingSet(post_r4.content, $event) || (post_r4.content = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵtext(2, \"              \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 37)(4, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function MainPageComponent_div_7_div_12_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.closeDropdown());\n    });\n    i0.ɵɵtext(5, \" Cancel \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 39);\n    i0.ɵɵlistener(\"click\", function MainPageComponent_div_7_div_12_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const post_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.savePostEdit(post_r4));\n    });\n    i0.ɵɵtext(7, \" Save Changes \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const post_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtwoWayProperty(\"ngModel\", post_r4.content);\n    i0.ɵɵproperty(\"placeholder\", post_r4.content == null ? \"what's in your mind\" : post_r4.content);\n  }\n}\nfunction MainPageComponent_div_7_div_13_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 43);\n  }\n  if (rf & 2) {\n    const post_r4 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r4.getFullMediaPost(post_r4.media), i0.ɵɵsanitizeUrl);\n  }\n}\nfunction MainPageComponent_div_7_div_13_video_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"video\", 44);\n  }\n  if (rf & 2) {\n    const post_r4 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r4.getFullMediaPost(post_r4.media), i0.ɵɵsanitizeUrl);\n  }\n}\nfunction MainPageComponent_div_7_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 40);\n    i0.ɵɵtemplate(1, MainPageComponent_div_7_div_13_img_1_Template, 1, 1, \"img\", 41)(2, MainPageComponent_div_7_div_13_video_2_Template, 1, 1, \"video\", 42);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const post_r4 = i0.ɵɵnextContext().$implicit;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.isImage(post_r4.media));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.isVideo(post_r4.media));\n  }\n}\nfunction MainPageComponent_div_7_div_14_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 48)(1, \"div\", 49);\n    i0.ɵɵelement(2, \"i\", 20)(3, \"i\", 50)(4, \"i\", 51);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\", 52);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const post_r4 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(post_r4.reactionsCount);\n  }\n}\nfunction MainPageComponent_div_7_div_14_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 53)(1, \"button\", 54);\n    i0.ɵɵlistener(\"click\", function MainPageComponent_div_7_div_14_div_2_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const post_r4 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.comments(post_r4.id));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const post_r4 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", post_r4.commentsCount, \" comment\", post_r4.commentsCount !== 1 ? \"s\" : \"\", \" \");\n  }\n}\nfunction MainPageComponent_div_7_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 45);\n    i0.ɵɵtemplate(1, MainPageComponent_div_7_div_14_div_1_Template, 7, 1, \"div\", 46)(2, MainPageComponent_div_7_div_14_div_2_Template, 3, 2, \"div\", 47);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const post_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", post_r4.reactionsCount > 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", post_r4.commentsCount > 0);\n  }\n}\nfunction MainPageComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 7)(2, \"div\", 8)(3, \"div\", 9);\n    i0.ɵɵelement(4, \"img\", 10);\n    i0.ɵɵelementStart(5, \"div\", 11)(6, \"a\", 12);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\", 13);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(10, MainPageComponent_div_7_div_10_Template, 15, 4, \"div\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(11, MainPageComponent_div_7_div_11_Template, 3, 1, \"div\", 15)(12, MainPageComponent_div_7_div_12_Template, 8, 2, \"div\", 15)(13, MainPageComponent_div_7_div_13_Template, 3, 2, \"div\", 16)(14, MainPageComponent_div_7_div_14_Template, 3, 2, \"div\", 17);\n    i0.ɵɵelementStart(15, \"div\", 18)(16, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function MainPageComponent_div_7_Template_button_click_16_listener() {\n      const post_r4 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.toggleLike(post_r4));\n    });\n    i0.ɵɵelement(17, \"i\", 20);\n    i0.ɵɵelementStart(18, \"span\");\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function MainPageComponent_div_7_Template_button_click_20_listener() {\n      const post_r4 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.comments(post_r4.id));\n    });\n    i0.ɵɵelement(21, \"i\", 22);\n    i0.ɵɵelementStart(22, \"span\");\n    i0.ɵɵtext(23, \"Comment\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"button\", 23);\n    i0.ɵɵelement(25, \"i\", 24);\n    i0.ɵɵelementStart(26, \"span\");\n    i0.ɵɵtext(27, \"Share\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const post_r4 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", ctx_r4.unKnownImage, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\" \", post_r4.account.firstName, \" \", post_r4.account.lastName, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r4.getTimeAgo(post_r4.createdDate));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.isCurrentUserPost(post_r4));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", post_r4.content && !(ctx_r4.edit && ctx_r4.editId === post_r4.id));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.edit && ctx_r4.editId === post_r4.id);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", post_r4.media);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", post_r4.reactionsCount > 0 || post_r4.commentsCount > 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"liked\", post_r4.liked);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(post_r4.liked ? \"Liked\" : \"Like\");\n  }\n}\nexport let MainPageComponent = /*#__PURE__*/(() => {\n  class MainPageComponent {\n    constructor(postService, reactionService, dialog, snackBar, authService, sharedService) {\n      this.postService = postService;\n      this.reactionService = reactionService;\n      this.dialog = dialog;\n      this.snackBar = snackBar;\n      this.authService = authService;\n      this.sharedService = sharedService;\n      this.isDropdownOpen = false;\n      this.unKnownImage = 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQcgO0A7rA9MJx0DQn3Vk_kgso2c_Na-J56yA&s';\n      this.edit = false;\n      this.page = 1;\n      this.limit = 10;\n      this.dropdownTop = 0;\n      this.dropdownRight = 0;\n    }\n    ngOnInit() {\n      this.messageSubscription = this.sharedService.currentMessage.subscribe(msg => {\n        if (msg === '') {\n          this.getAllPosts();\n        } else {\n          this.searchByContent(msg);\n        }\n      });\n    }\n    ngOnDestroy() {\n      if (this.messageSubscription) {\n        this.messageSubscription.unsubscribe();\n      }\n    }\n    getBaseUrlForMedia() {\n      return this.postService.baseUrlMedia;\n    }\n    getTimeAgo(dateTime) {\n      const now = new Date();\n      const past = new Date(dateTime);\n      const diffMs = now.getTime() - past.getTime();\n      if (isNaN(past.getTime())) {\n        return 'Invalid date';\n      }\n      const seconds = Math.floor(diffMs / 1000);\n      const minutes = Math.floor(seconds / 60);\n      const hours = Math.floor(minutes / 60);\n      const days = Math.floor(hours / 24);\n      const months = Math.floor(days / 30);\n      const years = Math.floor(days / 365);\n      if (seconds < 60) {\n        return `since ${seconds} second${seconds !== 1 ? 's' : ''} ago`;\n      }\n      if (minutes < 60) {\n        return `since ${minutes} minute${minutes !== 1 ? 's' : ''} ago`;\n      }\n      if (hours < 24) {\n        return `since ${hours} hour${hours !== 1 ? 's' : ''} ago`;\n      }\n      if (days < 30) {\n        return `since ${days} day${days !== 1 ? 's' : ''} ago`;\n      }\n      if (months < 12) {\n        return `since ${months} month${months !== 1 ? 's' : ''} ago`;\n      }\n      return `since ${years} year${years !== 1 ? 's' : ''} ago`;\n    }\n    getFullMediaPost(path) {\n      return `${this.getBaseUrlForMedia()}${path}`;\n    }\n    isImage(media) {\n      return /\\.(jpg|jpeg|png|gif|webp)$/i.test(media);\n    }\n    isVideo(media) {\n      return /\\.(mp4|webm|ogg)$/i.test(media);\n    }\n    closeDropdown() {\n      this.edit = false;\n      this.isDropdownOpen = false;\n    }\n    onEditPost(post) {\n      this.edit = true;\n      this.editId = post.id;\n    }\n    savePostEdit(postResponse) {\n      const post = new PostRequest(postResponse.id, postResponse.content, postResponse.media);\n      this.postService.updatePost(post).subscribe({\n        next: success => {\n          this.closeDropdown();\n          this.showSnackBar('Updated', SnackbarPanelClass.Success);\n        },\n        error: errors => {\n          this.showSnackBar(errors.error.bundleMessage.message_en, SnackbarPanelClass.Error);\n        }\n      });\n    }\n    onDeletePost(post) {\n      this.postService.deletePost(post.id).subscribe({\n        next: success => {\n          this.removePostLocal(post.id);\n          this.closeDropdown();\n          this.showSnackBar('Deleted', SnackbarPanelClass.Success);\n        },\n        error: errors => {\n          this.showSnackBar(errors.error.bundleMessage.message_en, SnackbarPanelClass.Error);\n        }\n      });\n    }\n    removePostLocal(postId) {\n      this.postsResponse.data = this.postsResponse.data.filter(p => p.id !== postId);\n    }\n    onScroll() {\n      this.page++;\n      this.getAllPosts();\n    }\n    isCurrentUserPost(post) {\n      return post.account?.id.toString() === this.authService.getAccountId();\n    }\n    getAllPosts() {\n      this.postService.getAllPosts(this.page, this.limit).subscribe({\n        next: response => {\n          response.data.forEach(post => this.processPost(post));\n          if (this.page === 1) {\n            this.postsResponse = response;\n          } else {\n            this.postsResponse.data.push(...response.data);\n          }\n        },\n        error: errors => {\n          this.showSnackBar(errors.error.bundleMessage.message_en, SnackbarPanelClass.Error);\n        }\n      });\n    }\n    searchByContent(content) {\n      this.postService.searchByContent(this.page, this.limit, content).subscribe({\n        next: response => {\n          response.data.forEach(post => this.processPost(post));\n          if (this.page === 1) {\n            this.postsResponse = response;\n          } else {\n            this.postsResponse.data.push(...response.data);\n          }\n        },\n        error: errors => {\n          this.showSnackBar(errors.error.bundleMessage.message_en, SnackbarPanelClass.Error);\n        }\n      });\n    }\n    // Toggle like functionality\n    toggleLike(post) {\n      if (post.liked) {\n        this.removeReact(post.id);\n      } else {\n        const reactionRequest = new ReactionRequestVm(post.id, ReactionType.LIKE);\n        this.makeReact(reactionRequest);\n      }\n    }\n    makeReact(reactionRequestVm) {\n      this.reactionService.makeReact(reactionRequestVm).subscribe({\n        next: response => {\n          const postFounded = this.postsResponse.data.find(p => p.id === reactionRequestVm.postId);\n          postFounded.liked = 1;\n          postFounded.reactionsCount++;\n        },\n        error: errors => {\n          this.showSnackBar(errors.error.bundleMessage.message_en, SnackbarPanelClass.Error);\n        }\n      });\n    }\n    removeReact(postId) {\n      this.reactionService.removeReact(postId).subscribe({\n        next: response => {\n          const postFounded = this.postsResponse.data.find(p => p.id === postId);\n          postFounded.liked = 0;\n          postFounded.reactionsCount--;\n        },\n        error: errors => {\n          this.showSnackBar(errors.error.bundleMessage.message_en, SnackbarPanelClass.Error);\n        }\n      });\n    }\n    comments(postId) {\n      const dialogRef = this.dialog.open(DialogCommentsComponent, {\n        width: '600px',\n        data: {\n          post_id: postId\n        }\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result) {\n          console.log('Name:', result.countComments);\n          const postFounded = this.postsResponse.data.find(p => p.id === result.postId);\n          postFounded.commentsCount += result.countComments;\n        }\n      });\n    }\n    showSnackBar(message, snackType) {\n      this.snackBar.open(message, 'Close', {\n        duration: 3000,\n        // milliseconds\n        verticalPosition: 'bottom',\n        // or 'top'\n        panelClass: [snackType]\n      });\n    }\n    processPost(post) {\n      if (!post) return;\n      post.timeAgo = this.getTimeAgo(post.createdDate);\n      post.isImage = post.media ? this.isImage(post.media) : false;\n      post.isVideo = post.media ? this.isVideo(post.media) : false;\n      post.isMine = this.isCurrentUserPost(post);\n      post.fullMediaUrl = post.media ? this.getFullMediaPost(post.media) : null;\n    }\n    trackByPost(index, post) {\n      return post.id;\n    }\n    static {\n      this.ɵfac = function MainPageComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || MainPageComponent)(i0.ɵɵdirectiveInject(i1.PostService), i0.ɵɵdirectiveInject(i2.ReactionService), i0.ɵɵdirectiveInject(i3.MatDialog), i0.ɵɵdirectiveInject(i4.MatSnackBar), i0.ɵɵdirectiveInject(i5.AuthService), i0.ɵɵdirectiveInject(i6.SharedService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: MainPageComponent,\n        selectors: [[\"app-main-page\"]],\n        decls: 9,\n        vars: 4,\n        consts: [[\"dropdown\", \"\"], [\"id\", \"page-contents\"], [1, \"container\"], [1, \"row\"], [1, \"col-md-7\"], [\"infiniteScroll\", \"\", 1, \"feed-container\", 3, \"scrolled\", \"infiniteScrollDistance\", \"infiniteScrollThrottle\", \"scrollWindow\"], [4, \"ngFor\", \"ngForOf\"], [1, \"post-content\"], [1, \"post-header\", \"flex\", \"justify-between\", \"items-start\", \"mb-3\"], [1, \"flex\", \"items-center\", \"gap-3\"], [\"alt\", \"user\", 1, \"profile-photo-md\", 3, \"src\"], [1, \"author-info\"], [\"href\", \"timeline.html\", 1, \"profile-link\", \"font-semibold\", \"text-gray-800\", \"hover:underline\"], [1, \"post-time\", \"text-sm\", \"text-gray-500\"], [\"class\", \"relative inline-block\", 4, \"ngIf\"], [\"class\", \"post-text\", 4, \"ngIf\"], [\"class\", \"post-media-container\", 4, \"ngIf\"], [\"class\", \"post-stats\", 4, \"ngIf\"], [1, \"post-actions\"], [1, \"action-btn\", \"like-btn\", 3, \"click\"], [1, \"fa\", \"fa-thumbs-up\"], [1, \"action-btn\", \"comment-btn\", 3, \"click\"], [1, \"fa\", \"fa-comment\"], [1, \"action-btn\", \"share-btn\"], [1, \"fa\", \"fa-share\"], [1, \"relative\", \"inline-block\"], [1, \"btn-options\", \"text-gray-500\", \"hover:text-gray-700\", \"p-2\", \"rounded-full\", \"hover:bg-gray-100\", 3, \"click\"], [1, \"fa\", \"fa-ellipsis-h\"], [\"hidden\", \"\", 1, \"fixed\", \"mt-2\", \"w-48\", \"bg-white\", \"rounded-lg\", \"shadow-lg\", \"border\", \"border-gray-200\", \"z-50\"], [1, \"py-1\"], [1, \"w-full\", \"text-left\", \"px-4\", \"py-2\", \"text-sm\", \"text-gray-700\", \"hover:bg-gray-100\", \"flex\", \"items-center\", \"gap-3\", 3, \"click\"], [1, \"fa\", \"fa-edit\", \"text-blue-500\"], [1, \"border-t\", \"border-gray-200\", \"my-1\"], [1, \"w-full\", \"text-left\", \"px-4\", \"py-2\", \"text-red-600\", \"hover:bg-red-50\", \"flex\", \"items-center\", \"gap-3\", 3, \"click\"], [1, \"fa\", \"fa-trash\"], [1, \"post-text\"], [\"rows\", \"4\", 1, \"edit-textarea\", 3, \"ngModelChange\", \"ngModel\", \"placeholder\"], [1, \"edit-actions\"], [1, \"btn-cancel\", 3, \"click\"], [1, \"btn-save\", 3, \"click\"], [1, \"post-media-container\"], [\"alt\", \"post-image\", \"class\", \"post-image\", 3, \"src\", 4, \"ngIf\"], [\"controls\", \"\", \"class\", \"post-video\", 3, \"src\", 4, \"ngIf\"], [\"alt\", \"post-image\", 1, \"post-image\", 3, \"src\"], [\"controls\", \"\", 1, \"post-video\", 3, \"src\"], [1, \"post-stats\"], [\"class\", \"reactions\", 4, \"ngIf\"], [\"class\", \"comments-count\", 4, \"ngIf\"], [1, \"reactions\"], [1, \"reaction-icons\"], [1, \"fa\", \"fa-heart\"], [1, \"fa\", \"fa-laugh\"], [1, \"reaction-count\"], [1, \"comments-count\"], [1, \"comments-link\", 3, \"click\"]],\n        template: function MainPageComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"div\", 3);\n            i0.ɵɵelement(3, \"app-left-bar\");\n            i0.ɵɵelementStart(4, \"div\", 4);\n            i0.ɵɵelement(5, \"app-publish\");\n            i0.ɵɵelementStart(6, \"div\", 5);\n            i0.ɵɵlistener(\"scrolled\", function MainPageComponent_Template_div_scrolled_6_listener() {\n              return ctx.onScroll();\n            });\n            i0.ɵɵtemplate(7, MainPageComponent_div_7_Template, 28, 12, \"div\", 6);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(8, \"app-right-bar\");\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"infiniteScrollDistance\", 2)(\"infiniteScrollThrottle\", 300)(\"scrollWindow\", false);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngForOf\", ctx.postsResponse == null ? null : ctx.postsResponse.data);\n          }\n        },\n        dependencies: [CommonModule, i7.NgForOf, i7.NgIf, FormsModule, i8.DefaultValueAccessor, i8.NgControlStatus, i8.NgModel, LeftBarComponent, RightBarComponent, PublishComponent, InfiniteScrollModule, i9.InfiniteScrollDirective],\n        styles: [\".post-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 1px 2px #0000001a;margin-bottom:20px;overflow:hidden;border:1px solid #dadde1}.post-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid #dadde1}.post-author[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.profile-photo-md[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;object-fit:cover;border:2px solid #e4e6ea}.author-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;font-size:15px;font-weight:600;color:#1c1e21}.author-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1c1e21;text-decoration:none}.author-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.post-time[_ngcontent-%COMP%]{margin:0;font-size:13px;color:#65676b;font-weight:400}.post-options[_ngcontent-%COMP%]{display:flex;align-items:center}.btn-options[_ngcontent-%COMP%]{background:none;border:none;padding:8px;border-radius:50%;cursor:pointer;color:#65676b;font-size:16px;transition:background-color .2s}.btn-options[_ngcontent-%COMP%]:hover{background-color:#f0f2f5}.post-text[_ngcontent-%COMP%]{padding:12px 16px;font-size:15px;line-height:1.4;color:#1c1e21}.post-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.post-image-container[_ngcontent-%COMP%]{width:100%;overflow:hidden}.post-image[_ngcontent-%COMP%]{width:100%;height:auto;display:block;max-height:500px;object-fit:cover}.post-stats[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 16px;border-bottom:1px solid #dadde1;font-size:13px}.reactions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.reaction-icons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2px}.reaction-icons[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;color:#1877f2}.reaction-count[_ngcontent-%COMP%]{color:#65676b;font-weight:500}.comments-count[_ngcontent-%COMP%]{color:#65676b}.comments-link[_ngcontent-%COMP%]{color:#65676b;text-decoration:none;font-weight:500}.comments-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.post-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:4px 0;border-bottom:1px solid #dadde1}.action-btn[_ngcontent-%COMP%]{background:none;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;display:flex;align-items:center;gap:8px;font-size:15px;font-weight:500;color:#65676b;transition:background-color .2s;flex:1;justify-content:center}.action-btn[_ngcontent-%COMP%]:hover{background-color:#f0f2f5}.action-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.like-btn[_ngcontent-%COMP%]:hover{color:#1877f2}.like-btn.liked[_ngcontent-%COMP%]{color:#1877f2;background-color:#e7f3ff}.comment-btn[_ngcontent-%COMP%]:hover{color:#1877f2}.share-btn[_ngcontent-%COMP%]:hover{color:#42b883}.comments-section[_ngcontent-%COMP%]{padding:8px 16px 12px}.comment[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:8px}.comment-avatar[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;object-fit:cover;flex-shrink:0}.comment-content[_ngcontent-%COMP%]{flex:1;background:#f0f2f5;border-radius:18px;padding:8px 12px;position:relative}.comment-content[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;left:-8px;top:12px;width:0;height:0;border-top:6px solid transparent;border-bottom:6px solid transparent;border-right:8px solid #f0f2f5}.comment-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:2px}.comment-author[_ngcontent-%COMP%]{font-weight:600;font-size:13px;color:#1c1e21;text-decoration:none}.comment-author[_ngcontent-%COMP%]:hover{text-decoration:underline}.comment-time[_ngcontent-%COMP%]{font-size:12px;color:#65676b}.comment-text[_ngcontent-%COMP%]{margin:0;font-size:14px;line-height:1.4;color:#1c1e21}.add-comment[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;margin-top:8px}.comment-input-container[_ngcontent-%COMP%]{flex:1;position:relative}.comment-input[_ngcontent-%COMP%]{width:100%;background:#f0f2f5;border:none;border-radius:18px;padding:8px 12px;font-size:14px;color:#1c1e21;outline:none;transition:background-color .2s}.comment-input[_ngcontent-%COMP%]:focus{background:#e4e6ea}.comment-input[_ngcontent-%COMP%]::placeholder{color:#65676b}@media(max-width:768px){.post-content[_ngcontent-%COMP%]{margin:0 -15px 20px;border-radius:0;border-left:none;border-right:none}.post-header[_ngcontent-%COMP%], .post-text[_ngcontent-%COMP%], .post-stats[_ngcontent-%COMP%], .post-actions[_ngcontent-%COMP%], .comments-section[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px}.action-btn[_ngcontent-%COMP%]{padding:6px 12px;font-size:14px}}.post-content[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px #00000026}.action-btn[_ngcontent-%COMP%]{transition:all .2s ease}.action-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.em[_ngcontent-%COMP%]{font-size:16px;margin:0 2px}.profile-link[_ngcontent-%COMP%]{color:#1877f2;text-decoration:none;font-weight:600}.profile-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.relative[_ngcontent-%COMP%]{position:relative}.inline-block[_ngcontent-%COMP%]{display:inline-block}.btn-options[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;outline:none;transition:all .15s ease}.text-gray-500[_ngcontent-%COMP%]{color:#6b7280}.hover\\\\:text-gray-700[_ngcontent-%COMP%]:hover{color:#374151}.p-2[_ngcontent-%COMP%]{padding:.5rem}.rounded-full[_ngcontent-%COMP%]{border-radius:9999px}.fixed[_ngcontent-%COMP%]{position:fixed}.mt-2[_ngcontent-%COMP%]{margin-top:.5rem}.w-48[_ngcontent-%COMP%]{width:12rem}.bg-white[_ngcontent-%COMP%]{background-color:#fff}.rounded-lg[_ngcontent-%COMP%]{border-radius:.5rem}.shadow-lg[_ngcontent-%COMP%]{box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}.border[_ngcontent-%COMP%]{border-width:1px;border-style:solid}.border-gray-200[_ngcontent-%COMP%]{border-color:#e5e7eb}.z-50[_ngcontent-%COMP%]{z-index:50}.py-1[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.25rem}.w-full[_ngcontent-%COMP%]{width:100%}.text-left[_ngcontent-%COMP%]{text-align:left}.px-4[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}.py-2[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}.text-gray-700[_ngcontent-%COMP%]{color:#374151}.hover\\\\:bg-gray-100[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.flex[_ngcontent-%COMP%]{display:flex}.items-center[_ngcontent-%COMP%]{align-items:center}.gap-3[_ngcontent-%COMP%]{gap:.75rem}.text-blue-500[_ngcontent-%COMP%]{color:#3b82f6}.text-green-500[_ngcontent-%COMP%]{color:#10b981}.text-red-600[_ngcontent-%COMP%]{color:#dc2626}.hover\\\\:bg-red-50[_ngcontent-%COMP%]:hover{background-color:#fef2f2}.border-t[_ngcontent-%COMP%]{border-top-width:1px;border-top-style:solid}.my-1[_ngcontent-%COMP%]{margin-top:.25rem;margin-bottom:.25rem}button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font:inherit;transition:background-color .15s ease}button[_ngcontent-%COMP%]:focus{outline:none}.post-text[_ngcontent-%COMP%]{padding:1rem}.post-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;line-height:1.5;color:#374151}.edit-textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #3b82f6;border-radius:.5rem;font-size:.875rem;font-family:inherit;line-height:1.5;resize:vertical;min-height:100px;outline:none;transition:border-color .2s}.edit-textarea[_ngcontent-%COMP%]:focus{border-color:#2563eb;box-shadow:0 0 0 3px #3b82f61a}.edit-textarea[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.edit-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.5rem;margin-top:.75rem}.edit-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:.375rem;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s}.btn-cancel[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#374151}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#e5e7eb}.btn-save[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.btn-save[_ngcontent-%COMP%]:hover{background-color:#2563eb}.btn-save[_ngcontent-%COMP%]:disabled{background-color:#9ca3af;cursor:not-allowed}.feed-container[_ngcontent-%COMP%]{height:100vh;overflow:auto;padding:16px}.post-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:16px;margin-bottom:12px;box-shadow:0 2px 6px #0000001a}.loading-spinner[_ngcontent-%COMP%]{text-align:center;padding:16px;color:#666}\"]\n      });\n    }\n  }\n  return MainPageComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}