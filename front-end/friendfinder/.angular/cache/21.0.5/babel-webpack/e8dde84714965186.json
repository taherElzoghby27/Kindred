{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { RequestLogin } from '../../../model/request-login';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../service/auth/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction LoginComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.emailError);\n  }\n}\nfunction LoginComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.passwordError);\n  }\n}\nfunction LoginComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"span\", 14);\n    i0.ɵɵtext(2, \"\\u26A0\\uFE0F\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 15)(4, \"div\", 16);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 17);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.errorMessageAr);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.errorMessageEn);\n  }\n}\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(authService, router) {\n      this.authService = authService;\n      this.router = router;\n      this.signInData = {\n        email: '',\n        password: ''\n      };\n      this.emailError = '';\n      this.passwordError = '';\n      this.errorMessageAr = '';\n      this.errorMessageEn = '';\n      this.errorBackend = false;\n    }\n    resetErrorFields() {\n      this.emailError = '';\n      this.passwordError = '';\n    }\n    onSubmit() {\n      if (!this.validation(this.signInData.email, this.signInData.password)) {\n        return;\n      }\n      const requestLoginModel = new RequestLogin(this.signInData.email, this.signInData.password);\n      this.authService.login(requestLoginModel).subscribe({\n        next: response => {\n          this.errorBackend = false;\n          this.resetErrorFields();\n          sessionStorage.setItem('account_id', response.data.body.id);\n          sessionStorage.setItem('token', response.data.body.token);\n          sessionStorage.setItem('userName', response.data.body.username);\n          this.router.navigateByUrl('mainpage');\n        },\n        error: errors => {\n          this.errorBackend = true;\n          this.resetErrorFields();\n          this.errorMessageAr = errors.error.bundleMessage.message_ar;\n          this.errorMessageEn = errors.error.bundleMessage.message_en;\n        }\n      });\n    }\n    validation(email, password) {\n      if (email === '') {\n        this.errorBackend = false;\n        this.emailError = 'Email is required';\n        return false;\n      }\n      if (password === '') {\n        this.errorBackend = false;\n        this.resetErrorFields();\n        this.passwordError = 'Password is required';\n        return false;\n      }\n      return true;\n    }\n    clear() {\n      this.emailError = '';\n      this.passwordError = '';\n      this.errorMessageAr = '';\n      this.errorMessageEn = '';\n      this.errorBackend = false;\n    }\n    static {\n      this.ɵfac = function LoginComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: LoginComponent,\n        selectors: [[\"app-login\"]],\n        decls: 22,\n        vars: 5,\n        consts: [[\"id\", \"banner\"], [1, \"login-container\"], [1, \"form-group\"], [\"for\", \"email\"], [\"id\", \"email\", \"name\", \"email\", \"type\", \"text\", \"required\", \"\", 3, \"ngModelChange\", \"input\", \"ngModel\"], [\"class\", \"error\", 4, \"ngIf\"], [\"for\", \"password\"], [\"id\", \"password\", \"name\", \"password\", \"type\", \"password\", \"required\", \"\", 3, \"ngModelChange\", \"input\", \"ngModel\"], [3, \"click\"], [1, \"signup-link\"], [\"routerLink\", \"/sign-up\"], [\"class\", \"error-message\", 4, \"ngIf\"], [1, \"error\"], [1, \"error-message\"], [1, \"error-icon\"], [1, \"error-text\"], [1, \"error-ar\"], [1, \"error-en\"]],\n        template: function LoginComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"h2\");\n            i0.ɵɵtext(3, \"Login\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"div\", 2)(5, \"label\", 3);\n            i0.ɵɵtext(6, \"Email\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"input\", 4);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_7_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.signInData.email, $event) || (ctx.signInData.email = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"input\", function LoginComponent_Template_input_input_7_listener() {\n              return ctx.clear();\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(8, LoginComponent_div_8_Template, 2, 1, \"div\", 5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"div\", 2)(10, \"label\", 6);\n            i0.ɵɵtext(11, \"Password\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"input\", 7);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_12_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.signInData.password, $event) || (ctx.signInData.password = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"input\", function LoginComponent_Template_input_input_12_listener() {\n              return ctx.clear();\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(13, LoginComponent_div_13_Template, 2, 1, \"div\", 5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"button\", 8);\n            i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_14_listener() {\n              return ctx.onSubmit();\n            });\n            i0.ɵɵtext(15, \"Login\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"div\", 9)(17, \"span\");\n            i0.ɵɵtext(18, \"Don't have an account?\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(19, \"a\", 10);\n            i0.ɵɵtext(20, \"Sign Up\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(21, LoginComponent_div_21_Template, 8, 2, \"div\", 11);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(7);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.signInData.email);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.emailError !== \"\");\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.signInData.password);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.passwordError !== \"\");\n            i0.ɵɵadvance(8);\n            i0.ɵɵproperty(\"ngIf\", ctx.errorBackend);\n          }\n        },\n        dependencies: [CommonModule, i3.NgIf, FormsModule, i4.DefaultValueAccessor, i4.NgControlStatus, i4.RequiredValidator, i4.NgModel, RouterModule, i2.RouterLink],\n        styles: [\"[_nghost-%COMP%]{display:block;min-height:100vh;background:#f0f2f5;padding:48px 16px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif}.login-container[_ngcontent-%COMP%]{max-width:396px;margin:60px auto;padding:16px 16px 24px;border-radius:8px;background-color:#fff;box-shadow:0 2px 12px #00000014}h2[_ngcontent-%COMP%]{text-align:center;margin:8px 0 16px;font-weight:700;font-size:1.75rem;color:#1c1e21}.form-group[_ngcontent-%COMP%]{margin-bottom:12px}label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-size:1rem;color:#606770}input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%;height:52px;padding:0 14px;font-size:1.05rem;color:#1c1e21;background-color:#fff;border:1px solid #dddfe2;border-radius:6px;box-sizing:border-box;transition:border-color .2s ease}input[type=text][_ngcontent-%COMP%]::placeholder, input[type=password][_ngcontent-%COMP%]::placeholder{color:#8d949e}input[type=text][_ngcontent-%COMP%]:focus, input[type=password][_ngcontent-%COMP%]:focus{border-color:#1877f2;outline:none;box-shadow:0 0 0 2px #1877f226}button[_ngcontent-%COMP%]{width:100%;height:52px;margin-top:8px;background-color:#1877f2;color:#fff;font-size:1.15rem;font-weight:700;border:none;border-radius:6px;cursor:pointer;transition:background-color .15s ease-in-out}button[_ngcontent-%COMP%]:hover{background-color:#166fe5}button[_ngcontent-%COMP%]:disabled{background-color:#e4e6eb;color:#bcc0c4;cursor:not-allowed}.error[_ngcontent-%COMP%]{color:#e41e3f;font-size:.95rem;margin-top:6px}.signup-link[_ngcontent-%COMP%]{margin-top:16px;text-align:center;font-size:1rem;color:#1c1e21}.signup-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:6px;color:#1877f2;text-decoration:none;font-weight:600}.signup-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.error-message[_ngcontent-%COMP%]{display:flex;align-items:flex-start;background-color:#fff5f6;border:1px solid #f2c2c8;color:#b91c32;padding:12px;border-radius:6px;margin-top:14px}.error-icon[_ngcontent-%COMP%]{margin-right:8px}.error-text[_ngcontent-%COMP%]{flex:1;font-size:1rem}.error-ar[_ngcontent-%COMP%]{font-family:Arial,sans-serif}.error-en[_ngcontent-%COMP%]{font-family:Segoe UI,sans-serif}@media(max-width:480px){.login-container[_ngcontent-%COMP%]{margin:24px auto;padding:12px 12px 20px}}\"]\n      });\n    }\n  }\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}