{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { SnackbarPanelClass } from '../../../../enum/snackbar-panel-class.enum';\nimport { FriendshipStatus } from '../../../../enum/friendship-status.enum';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../service/friendship/friendship.service\";\nimport * as i2 from \"../../../../service/auth/auth.service\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"@angular/common\";\nfunction RightBarComponent_div_4_button_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const user_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", user_r1.status);\n  }\n}\nfunction RightBarComponent_div_4_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function RightBarComponent_div_4_button_8_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const user_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.requestFriend(user_r1.ac2_id));\n    });\n    i0.ɵɵtext(1, \" Add Friend\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RightBarComponent_div_4_button_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function RightBarComponent_div_4_button_9_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const user_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.removeRequestFriend(user_r1.ac2_id));\n    });\n    i0.ɵɵtext(1, \" Remove Request\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RightBarComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 4);\n    i0.ɵɵelement(2, \"img\", 5);\n    i0.ɵɵelementStart(3, \"div\")(4, \"h5\")(5, \"a\", 6);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(7, RightBarComponent_div_4_button_7_Template, 2, 1, \"button\", 7)(8, RightBarComponent_div_4_button_8_Template, 2, 0, \"button\", 8)(9, RightBarComponent_div_4_button_9_Template, 2, 0, \"button\", 8);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const user_r1 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", ctx_r2.unKnownImage, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(user_r1.ac2_username);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", user_r1.status != null);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", user_r1.status == null);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", user_r1.status == \"PENDING\");\n  }\n}\nexport let RightBarComponent = /*#__PURE__*/(() => {\n  class RightBarComponent {\n    constructor(friendshipService, authService, snackBar) {\n      this.friendshipService = friendshipService;\n      this.authService = authService;\n      this.snackBar = snackBar;\n      this.unKnownImage = 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQcgO0A7rA9MJx0DQn3Vk_kgso2c_Na-J56yA&s';\n    }\n    ngOnInit() {\n      this.getUsers();\n    }\n    getUsers() {\n      this.authService.getUsers(1, 10).subscribe({\n        next: result => {\n          this.users = result;\n        },\n        error: errors => {\n          this.showSnackBar(errors.error.bundleMessage.message_en, SnackbarPanelClass.Error);\n        }\n      });\n    }\n    requestFriend(friendId) {\n      this.friendshipService.requestFriend(friendId).subscribe({\n        next: result => {\n          const userFriendship = this.users.data.find(u => u.ac2_id === friendId);\n          userFriendship.status = FriendshipStatus.PENDING;\n        },\n        error: errors => {\n          this.showSnackBar(errors.error.bundleMessage.message_en, SnackbarPanelClass.Error);\n        }\n      });\n    }\n    currentUserId() {\n      return this.authService.getAccountId();\n    }\n    removeRequestFriend(friendId) {\n      this.friendshipService.removeFriendShip(friendId).subscribe({\n        next: result => {\n          const userFriendship = this.users.data.find(u => u.ac2_id === friendId);\n          userFriendship.status = null;\n        },\n        error: errors => {\n          this.showSnackBar(errors.error.bundleMessage.message_en, SnackbarPanelClass.Error);\n        }\n      });\n    }\n    updateRequestFriend() {}\n    showSnackBar(message, snackType) {\n      this.snackBar.open(message, 'Close', {\n        duration: 3000,\n        // milliseconds\n        verticalPosition: 'bottom',\n        // or 'top'\n        panelClass: [snackType]\n      });\n    }\n    static {\n      this.ɵfac = function RightBarComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RightBarComponent)(i0.ɵɵdirectiveInject(i1.FriendshipService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.MatSnackBar));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: RightBarComponent,\n        selectors: [[\"app-right-bar\"]],\n        decls: 5,\n        vars: 1,\n        consts: [[1, \"col-md-2\", \"static\"], [\"id\", \"sticky-sidebar\", 1, \"suggestions\"], [1, \"grey\"], [4, \"ngFor\", \"ngForOf\"], [1, \"follow-user\"], [\"alt\", \"\", 1, \"profile-photo-sm\", \"pull-left\", 3, \"src\"], [\"href\", \"timeline.html\"], [\"class\", \"text-green\", 4, \"ngIf\"], [\"class\", \"text-green\", 3, \"click\", 4, \"ngIf\"], [1, \"text-green\"], [1, \"text-green\", 3, \"click\"]],\n        template: function RightBarComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h4\", 2);\n            i0.ɵɵtext(3, \"Add Friends\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(4, RightBarComponent_div_4_Template, 10, 5, \"div\", 3);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngForOf\", ctx.users.data);\n          }\n        },\n        dependencies: [CommonModule, i4.NgForOf, i4.NgIf],\n        encapsulation: 2\n      });\n    }\n  }\n  return RightBarComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}